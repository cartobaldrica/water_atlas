<!DOCTYPE html>
<html lang="en">
<head>
    <title>Precipitation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta property="og:title" content="Oregon Flooding" />
    <meta property="og:url" content="http://rawgit.com/cartobaldrica/water_atlas/master/flood_index.html" />
    <meta property="og:description" content="Major historical Oregon floods and explorations of flood vulnerability and risk." />
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="css/precip_style.css">
    <link rel="stylesheet" href="css/control-minimap.css" />
    <link rel="stylesheet" href="css/ekko-lightbox.css"/>        
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="shortcut icon" href="img/oregon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

    
	<link href="https://fonts.googleapis.com/css?family=La+Belle+Aurore" rel="stylesheet">	
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inconsolata" />
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">


    <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="js/leaflet.ajax.min.js"></script>
    <script src="js/storymap_fixed.js"></script>
	<script src="js/ekko-lightbox.js"></script>
	<script src="js/control-minimap.js" type="text/javascript"></script>
	
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-md-4 main">

            <section data-scene="overview">
				 	<div class= "overview-background-img background-fullscreen-setting text-responsive"><h4 class="text-center">Precipitation</h4><br><h4 class ="text-center" style="font-size:20px; margin-top:0px; color: #ffffff; text-shadow: black 0.2em 0.2em 0.3em; margin-left: 20%; margin-right:20%">Approximately a quarter of Oregonians live in floodplains. Despite the increased management and regulation of rivers, flooding remains a risk throughout most of the state, particularly west of the Cascades. Understanding the impacts of historic floods and surveying at-risk areas can aid hazard planning and response.</h4></div>
                	<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>     
            </section>
            
             <section data-scene="annual">
                <h3>Annual</h3>
			</section>  
			
			 <section data-scene="january">
                <h3>January</h3>
			</section>    
			
			 <section data-scene="february">
                <h3>February</h3>
			</section>    
			
			 <section data-scene="march">
                <h3>March</h3>
			</section>    
			
			 <section data-scene="april">
                <h3>April</h3>
			</section>    
			
			 <section data-scene="may">
                <h3>May</h3>
			</section>    
			
			 <section data-scene="june">
                <h3>June</h3>
			</section>    
			
			 <section data-scene="july">
                <h3>July</h3>
			</section>    
			
			 <section data-scene="august">
                <h3>August</h3>
			</section>    
			
			 <section data-scene="september">
                <h3>September</h3>
			</section>    
			
			 <section data-scene="october">
                <h3>October</h3>
			</section>
			
			<section data-scene="november">
                <h3>November</h3>
			</section>
			
			<section data-scene="december">
                <h3>December</h3>
			</section>
			
			 <section data-scene="end">
				 	<div class= "end-background-img background-fullscreen-setting text-responsive"><br>
                	<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>     
            </section>
			
        	<i class="animated zoomIn infinite glyphicon glyphicon-menu-down arrow-down"></i>
        </div>
        <div id="map" class="col-sm-6 col-md-8 sidebar"></div>
    </div>
    
    <i class="fa fa-info-circle social" style="top:10px" data-toggle="modal" data-target="#info-modal"></i>
    
	<a class="fa fa-facebook-square social2" style="top:28px" href="https://facebook.com/sharer.php?u=http://rawgit.com/cartobaldrica/water_atlas/master/flood_index.html" target="_blank"></a>
    
    <ul class="navbar text-center"></ul>

    
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title">About</h2>
                </div>
                <div class="modal-body">
                    <p2 style="font-size:20px">Geographic Data</p2><br>
                    <p2>1861, 1964, 1996 Flood Extent and Insurance Zones: FEMA - retrieved from Oregon Spatial Data Library</p2><br>
                	<p2>Vanport: Oregon Historical Society</p2><br>
                	<p2>1996 Satellite Imagery: Landsat Image Archive</p2><br>
                	<p2>Demographics: U.S Census Bureau</p2><br>
                	<p2 style="font-size:20px">Text Data</p2><br>
                	<p2>1861 Flood: Oregon Historical Quarterly</p2><br>
                	<p2>Vanport Flood: Oregon Historical Society, Smithsonian</p2><br>
                	<p2>1964 Flood: The Oregonian</p2><br>
                	<p2>1996 Flood: Oregonian</p2><br>
                	<p2>Flood Insurance and Demographics: FEMA, Oregon Risk MAP</p2><br>
                </div>
                <div class="modal-footer">
                    <p2>Created with Leaflet</p>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
</div>


<script type="text/javascript">
   	
    var legend_zones = '<i style="background: #bf4040; fillOpacity: .5; color:#993333; weight: 1; opacity: 0.5"></i><b><p>Flood Risk Zones</b></p>';


    var layers = {  
          'annual' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_annual',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
          'january' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_january',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
          'february' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_february',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
           'march' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_march',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
        	'april' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_april',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
            'may' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_may',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
          'june' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_june',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
          'july' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_july',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
           'august' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_august',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
        	'september' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_september',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
            'october' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_october',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
            'november' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_november',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones],
            'december' : [L.tileLayer.wms('http://mapio.us/geoserver/baldricg_atlas/wms', {
              layers: 'baldricg_atlas:precip_december',
              tiled: true,
              format: 'image/png',
              transparent: true,
              maxZoom: 14,
              minZoom: 6,
              continuousWorld: true
              }), legend_zones]
              
    };

    var scenes = {
            overview: {lat: 44.1347254, lng:-122.7411479, zoom: 7, position: 'fullpage'},
            annual: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['annual']},
            january: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['january']},
        	february: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['february']},
        	march: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['march']},
        	april: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['april']},
        	may: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['may']},
        	june: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['june']},
        	july: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['july']},
        	august: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['august']},
			september: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['september']},
			october: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['october']},
			november: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['november']},
			december: {lat: 44.1347254, lng:-122.7411479, zoom: 7, layers:['december']},
			end: {lat: 44.1347254, lng:-122.7411479, zoom: 7, position:'fullpage'}


    };
    
    

    $('.main').storymap({
        scenes: scenes,
        layers:layers,
        legend: true,
        scale:false,
        navbar: true,
        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
                var map = L.map('map',{zoomControl:false, scrollWheelZoom:false}).setView([44.1347254, -122.7411479], 7);
            // add an basemap, which can be either OSM, mapbox, tilelayer, wmslayer or those designed by yourself.
          /* L.tileLayer.wms("http://mapio.us/geoserver/baldricg_basemap/wms", {
        			layers: 'baldricg_basemap:basemap_light',
       				format: 'image/png',
       				minZoom: 6,
       				transparent: true,
        			maxZoom: 15,
        			
        		attribution: "Created by Gareth Baldrica-Franklin"
    			}).addTo(map);
    			
    			L.tileLayer.wms("http://mapio.us/geoserver/baldricg_basemap/wms", {
        			layers: 'baldricg_basemap:basemap_light_labels',
        			format: 'image/png',
        			minZoom: 6,
        			maxZoom: 15,
        			transparent: true,
        			tiled: true, 
        			tilesorigin: [-180, 90]
    			}).addTo(map);
    	*/
    	
    			var CartoDB_Positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
					subdomains: 'abcd',
					minZoom: 6,
        			maxZoom: 15
				}).addTo(map);
    			
    	
 				
 				var mini = new L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
					subdomains: 'abcd',
					maxZoom: 8,
					minZoom:5
				});
				
				var miniMap = new L.Control.MiniMap(mini, { toggleDisplay: false});
				
				miniMap.addTo(map);

				
				new L.Control.Zoom({ position: 'bottomright'}).addTo(map);
 				
			
				
				/*if (scene == 'portland'){
				miniMap;
				}*/

            return map;
        }
    });
    
    document.getElementsByClassName("leaflet-control-attribution")[0].style.visibility = "hidden";

    
    $(document).on('click', '[data-toggle="lightbox"]', function(event) {
   		event.preventDefault();
    $(this).ekkoLightbox();
	});

</script>
</body>
</html>